---
import { colleges } from '../../constants/colleges';
import CollegeCard from '../CollegeCard';
const { id } = Astro.props;

// Themengruppen
const groupedColleges = {
  'Technik & Informatik': colleges.filter((c) => c.topic === 'Technik' || c.topic === 'Informatik'),
  Design: colleges.filter((c) => c.topic === 'Design'),
  'Bau & Architektur': colleges.filter((c) => c.topic === 'Bau & Architektur'),
  Naturwissenschaft: colleges.filter((c) => c.topic === 'Naturwissenschaft'),
};

type Topic = 'Technik & Informatik' | 'Design' | 'Bau & Architektur' | 'Naturwissenschaft';

const topicColors: Record<Topic, string> = {
  'Technik & Informatik': 'primary',
  Design: 'pink',
  'Bau & Architektur': 'orange',
  Naturwissenschaft: 'red',
};
---

<section id={id} class="relative py-32 px-6 overflow-hidden">
  <!-- ðŸ”® Radialer Farbverlauf -->
  <div
    class="absolute inset-0 z-0"
    style="background: radial-gradient(ellipse at top right, #1b95cc44, transparent 90%); will-change: transform;"
  >
  </div>

  <!-- ðŸ§Š Glass-Overlay -->
  <div class="absolute inset-0 z-0 backdrop-glass"></div>

  <!-- ðŸ”² Inhalt -->
  <div class="relative z-10 max-w-screen-xl mx-auto text-center">
    <h2 class="text-4xl sm:text-5xl font-headline font-bold text-primary mb-4">
      Kollegs entdecken
    </h2>
    <p class="text-lg text-gray-600 mb-16 max-w-2xl mx-auto">
      In ganz Ã–sterreich findest du Kollegs fÃ¼r Technik, Design und mehr â€“ entdecke, was zu dir
      passt.
    </p>

    <!-- ðŸ“š Thematisch gegliederte Sections -->
    {
      Object.entries(groupedColleges)
        .sort(([a], [b]) => a.localeCompare(b))
        .map(([topic, list]) => (
          <div class="text-left mb-32" id={topic.toLowerCase().replace(/ /g, '-')}>
            <h3
              class={`text-3xl font-bold mb-4 text-${topicColors[topic as Topic] ?? 'text-primary'}`}
            >
              {topic}
            </h3>

            <p class="text-gray-600 mb-8 max-w-3xl">
              {topic === 'Technik & Informatik'
                ? 'Praktisch, zukunftsorientiert und gefragt â€“ Technik- und Informatik-Kollegs bereiten dich optimal auf Industrie, IT und Digitalisierung vor.'
                : topic === 'Design'
                  ? 'Gestalten, entwerfen, kreativ denken â€“ Kollegs im Design-Bereich fÃ¶rdern deine gestalterische StÃ¤rke.'
                  : topic === 'Bau & Architektur'
                    ? 'Du willst RÃ¤ume planen, Bauwerke entwerfen und mit Technik verbinden? Diese Kollegs bieten dir eine solide Grundlage.'
                    : topic === 'Naturwissenschaft'
                      ? 'Wenn du experimentierst, analysierst und forschst â€“ entdecke naturwissenschaftliche Kollegs.'
                      : 'Diese Kollegs kÃ¶nnten dich ebenfalls interessieren.'}
            </p>

            <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-primary/40">
              {list.map((colleg) => (
                <CollegeCard client:visible {...colleg} />
              ))}
            </div>
          </div>
        ))
    }
  </div>
</section>
